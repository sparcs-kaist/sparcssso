{% extends "base.html" %}
{% load i18n %}
{% block app-header %}

<!-- own css -->
<link rel="stylesheet" type="text/css" href="/static/css/main.css">
<link rel="stylesheet" type="text/css" href="/static/css/stats.css">

<!-- cdn css/js -->
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/locales/bootstrap-datepicker.ko.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>

{% endblock %}

{% block content %}

<h1 class="doc-header">SPARCS SSO Statistics <small>({{ time|date:"Y-m-d\TH:i:sT"}})</small></h1>
<p>Permission: 
{% if level == 0 %}
PUBLIC
{% elif level == 1 %}
<b>SPARCS</b>
{% elif level == 2 %}
<span class="text-danger"><b>SYSOP</b></span>
{% endif %}
</p>

<!-- Stat request bar -->
<div class="row">
<div class="col-xs-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
  <div class="input-daterange input-group" id="datepicker">

    <!-- Service  -->
    <div class="input-group-btn btn-group" role="group">
      <div class="btn-group" role="group">
        <button class="btn btn-default dropdown-toggle" type="button" id="service-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          <span class="s-name">서비스</span>
          <span class="caret"></span>
        </button>
        <ul id="service-dropdown-menu" class="dropdown-menu" aria-labelledby="service-dropdown">
        </ul>
      </div>
    </div>
    
    <!-- Date -->
    <input type="text" class="form-control date-control s-date" name="start" value="" />
    <span class="input-group-addon">~</span>
    <input type="text" class="form-control date-control e-date" name="end" value="" />
    
    <!-- Go btn -->
    <span class="input-group-btn">
      <button class="btn btn-default btn-primary btn-get-stat" type="button">Go!</button>
    </span>
  </div>
</div>
</div>

<div role="tabpanel">

  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a href="#total-tab" aria-controls="total-tab"
        role="tab" data-toggle="tab">전체</a>
    </li>
    <li role="presentation">
      <a href="#recent-tab" aria-controls="recent-tab"
        role="tab" data-toggle="tab">최신</a>
    </li>
  </ul>
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="total-tab">
      <div class="row chart-lv-1">
        <div id="birth-year-t-chart" class="chart-body"></div>
        <div id="gender-t-chart" class="chart-body"></div>
      </div>
  
      <div class="row chart-lv-2">
        <div id="account-t-chart" class="chart-body"></div>
        <hr />
        <div id="kaist-gender-t-chart" class="chart-body"></div>
        <div id="kaist-start-year-t-chart" class="chart-body"></div>
        <div id="kaist-birth-year-t-chart" class="chart-body"></div>
        <div id="kaist-department-t-chart" class="chart-body"></div>
      </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="recent-tab">
      <div class="row chart-lv-1">
        <div id="birth-year-r-chart" class="chart-body"></div>
        <div id="gender-r-chart" class="chart-body"></div>
      </div>
  
      <div class="row chart-lv-2">
        <div id="account-r-chart" class="chart-body"></div>
        <hr />
        <div id="kaist-gender-r-chart" class="chart-body"></div>
        <div id="kaist-start-year-r-chart" class="chart-body"></div>
        <div id="kaist-birth-year-r-chart" class="chart-body"></div>
        <div id="kaist-department-r-chart" class="chart-body"></div>
        <h4>kaist-professor/employee</h4>
        <table class="table table-bordered kaist-table">
          <thead>
            <tr>
              <th>professor</th>
              <th>employee</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="kaist-professor-cell"></td>
              <td id="kaist-employee-cell"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- own js -->
<script src="/static/js/stats.js"></script>
{% endblock %}
